
CREATE TABLE departments (
   id INTEGER PRIMARY KEY,
    name VARCHAR(30) NOT NULL
  
);

CREATE TABLE employeerole (
    id INTEGER PRIMARY KEY,
    title varchar(30) ,
    salary decimal ,
    department_id INT,

        CONSTRAINT fk_department 
        FOREIGN KEY (department_id) 
        REFERENCES departments(id) 
        ON UPDATE CASCADE 
        
        ON DELETE SET NULL

);

CREATE TABLE employees (
    id INTEGER PRIMARY KEY,
    first_name varchar(30) ,
    last_name varchar(30) ,
    role_id INT,
    manager_id INT,
    CONSTRAINT fk_manager
      FOREIGN KEY (manager_id)
    REFERENCES employees(id)

        ON UPDATE CASCADE
    ON DELETE SET NULL,
    CONSTRAINT fk_role 
        FOREIGN KEY (role_id) 
        REFERENCES employeerole(id)

        ON UPDATE CASCADE 


        ON DELETE SET NULL
);


INSERT INTO departments 
(id, name) --repeat algorithm

VALUES 
    (  1 , 'Supervisor'),
    ( 2 , 'HR'),
    ( 3 , 'accounting'),
    ( 4 , 'Mental Health');

INSERT INTO employeerole --order matters
(id, title, salary, department_id)

VALUES
    (  1, 'Supervisor ', 20000, 1),
    (  2, 'Assistant to the regional manager', 89900, 1  ),
    (  3, 'Assistant Regional Manager', 12000, 2  ),
    (  4, 'Office Pranks', 11000, 2  ),
     (  5, 'Computer dude', 22000, 3  ),
    (  6, 'Head doctor', 11000, 4  ),
    (  7, 'top head doctor', 50000, 4 );
    --peaky blinders eh
INSERT INTO  employees   
(id, first_name, last_name, role_id, manager_id)

VALUES
    ( 1,"mr", "jones", 7, NULL ),            
     ( 2, "tommy", "shelby", 1, 1 ),
    ( 3, "arthur", "shelby", 3, NULL ),   
    ( 4, "john", "shelby", 4, 3 ),
    ( 5, "polly", "gray", 2, NULL ),
    ( 6, "michael", "gray", 5, NULL ),
    ( 7, "mr ", "solomons", 6, 6 );

  